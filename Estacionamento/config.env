# ============================================================================
# CONFIGURAÇÕES DO SISTEMA DE ESTACIONAMENTO
# Projeto: Controle de Estacionamento com MODBUS RS485
# ============================================================================

# ----------------------------------------------------------------------------
# COMUNICAÇÃO SERIAL MODBUS
# ----------------------------------------------------------------------------
# Porta serial RS485 (ajustar conforme sua interface)
# Opções comuns: /dev/serial0, /dev/ttyUSB0, /dev/ttyAMA0
MODBUS_SERIAL_PORT=/dev/serial0

# Baudrate da comunicação serial (padrão: 115200 bps)
MODBUS_SERIAL_BAUD=115200

# Configuração: 8N1 (8 bits de dados, sem paridade, 1 stop bit)
# Nota: Esta configuração é padrão e está hardcoded no código

# ----------------------------------------------------------------------------
# ENDEREÇOS DOS DISPOSITIVOS MODBUS
# ----------------------------------------------------------------------------
# Câmera LPR da entrada (leitura de placa na entrada)
MODBUS_ADDR_LPR_ENTRADA=0x11

# Câmera LPR da saída (leitura de placa na saída)
MODBUS_ADDR_LPR_SAIDA=0x12

# Placar de vagas (display de informações do estacionamento)
MODBUS_ADDR_PLACAR=0x20

# ----------------------------------------------------------------------------
# PARÂMETROS DE COMUNICAÇÃO MODBUS
# ----------------------------------------------------------------------------
# Timeout para respostas MODBUS (em milissegundos)
MODBUS_TIMEOUT_MS=500

# Número máximo de tentativas em caso de erro
MODBUS_RETRIES=3

# Delays entre tentativas (backoff exponencial)
MODBUS_MIN_DELAY_MS=100
MODBUS_MEDIUM_DELAY_MS=250
MODBUS_MAX_DELAY_MS=500

# Timeout para processamento da câmera LPR (em milissegundos)
LPR_PROCESSING_TIMEOUT_MS=2000

# ----------------------------------------------------------------------------
# MATRÍCULA DO ALUNO (4 últimos dígitos)
# ----------------------------------------------------------------------------
# Conforme especificação: enviar matrícula ao final de cada mensagem MODBUS
# Matrícula: 7700 (enviada como binário: 0x00, 0x07, 0x07, 0x00)
MODBUS_MATRICULA_BYTE1=0x00
MODBUS_MATRICULA_BYTE2=0x07
MODBUS_MATRICULA_BYTE3=0x07
MODBUS_MATRICULA_BYTE4=0x00

# ----------------------------------------------------------------------------
# CONFIGURAÇÕES DO SERVIDOR CENTRAL (TCP/IP)
# ----------------------------------------------------------------------------
# Endereço IP do servidor central
CENTRAL_SERVER_HOST=0.0.0.0

# Porta TCP do servidor central
CENTRAL_SERVER_PORT=10000

# Timeout de reconexão TCP (em segundos)
TCP_RECONNECT_TIMEOUT=5

# ----------------------------------------------------------------------------
# CONFIGURAÇÕES DOS SERVIDORES DISTRIBUÍDOS
# ----------------------------------------------------------------------------
# Endereço IP para conexão ao servidor central
SERVIDOR_CENTRAL_IP=127.0.0.1

# Porta para conexão ao servidor central
SERVIDOR_CENTRAL_PORT=10000

# Intervalo de atualização de vagas (em segundos)
VAGAS_UPDATE_INTERVAL=1

# Intervalo de varredura de sensores (em milissegundos)
GPIO_SCAN_INTERVAL_MS=100

# ----------------------------------------------------------------------------
# PARÂMETROS DE COBRANÇA
# ----------------------------------------------------------------------------
# Preço por minuto (em reais)
PRECO_POR_MINUTO=0.15

# Arredondamento de tempo (0 = para baixo, 1 = para cima)
ARREDONDAR_TEMPO=1

# ----------------------------------------------------------------------------
# PARÂMETROS DAS CÂMERAS LPR
# ----------------------------------------------------------------------------
# Limiar mínimo de confiança para aceitar leitura de placa (0-100%)
LPR_CONFIANCA_MINIMA=70

# Limiar para política de tratamento de baixa confiança (< 60%)
LPR_CONFIANCA_BAIXA=60

# Habilitar modo degradado (permite entrada sem LPR)
LPR_MODO_DEGRADADO=true

# ----------------------------------------------------------------------------
# CONFIGURAÇÕES GPIO - ANDAR TÉRREO
# ----------------------------------------------------------------------------
# Pinos de endereçamento para varredura de vagas
TERREO_ENDERECO_01=17
TERREO_ENDERECO_02=18

# Sensor de vaga (multiplexado)
TERREO_SENSOR_VAGA=8

# Cancela de entrada
TERREO_SENSOR_ABERTURA_CANCELA_ENTRADA=7
TERREO_SENSOR_FECHAMENTO_CANCELA_ENTRADA=1
TERREO_MOTOR_CANCELA_ENTRADA=23

# Cancela de saída
TERREO_SENSOR_ABERTURA_CANCELA_SAIDA=12
TERREO_SENSOR_FECHAMENTO_CANCELA_SAIDA=25
TERREO_MOTOR_CANCELA_SAIDA=24

# Número de vagas no térreo
TERREO_NUM_VAGAS=4

# ----------------------------------------------------------------------------
# CONFIGURAÇÕES GPIO - 1º ANDAR
# ----------------------------------------------------------------------------
# Pinos de endereçamento para varredura de vagas
ANDAR1_ENDERECO_01=16
ANDAR1_ENDERECO_02=20
ANDAR1_ENDERECO_03=21

# Sensor de vaga (multiplexado)
ANDAR1_SENSOR_VAGA=27

# Sensores de passagem entre andares
ANDAR1_SENSOR_PASSAGEM_1=22
ANDAR1_SENSOR_PASSAGEM_2=11

# Número de vagas no 1º andar
ANDAR1_NUM_VAGAS=8

# ----------------------------------------------------------------------------
# CONFIGURAÇÕES GPIO - 2º ANDAR
# ----------------------------------------------------------------------------
# Pinos de endereçamento para varredura de vagas
ANDAR2_ENDERECO_01=0
ANDAR2_ENDERECO_02=5
ANDAR2_ENDERECO_03=6

# Sensor de vaga (multiplexado)
ANDAR2_SENSOR_VAGA=13

# Sensores de passagem entre andares
ANDAR2_SENSOR_PASSAGEM_1=19
ANDAR2_SENSOR_PASSAGEM_2=26

# Número de vagas no 2º andar
ANDAR2_NUM_VAGAS=8

# ----------------------------------------------------------------------------
# CONFIGURAÇÕES DE VAGAS POR TIPO
# ----------------------------------------------------------------------------
# Distribuição de vagas no térreo
TERREO_VAGAS_PNE=1
TERREO_VAGAS_IDOSO=1
TERREO_VAGAS_COMUNS=2

# Distribuição de vagas no 1º andar
ANDAR1_VAGAS_PNE=2
ANDAR1_VAGAS_IDOSO=2
ANDAR1_VAGAS_COMUNS=4

# Distribuição de vagas no 2º andar
ANDAR2_VAGAS_PNE=2
ANDAR2_VAGAS_IDOSO=2
ANDAR2_VAGAS_COMUNS=4

# ----------------------------------------------------------------------------
# CONFIGURAÇÕES DE LOG E DEBUG
# ----------------------------------------------------------------------------
# Nível de log (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Habilitar debug MODBUS (mostra pacotes enviados/recebidos)
MODBUS_DEBUG=true

# Arquivo de log
LOG_FILE=/var/log/estacionamento.log

# Habilitar log de eventos no console
LOG_CONSOLE=true

# ----------------------------------------------------------------------------
# CONFIGURAÇÕES AVANÇADAS
# ----------------------------------------------------------------------------
# Tempo máximo de abertura da cancela (em segundos)
CANCELA_TIMEOUT_ABERTURA=10

# Tempo máximo para passagem de veículo (em segundos)
PASSAGEM_TIMEOUT=30

# Intervalo de atualização do placar (em segundos)
PLACAR_UPDATE_INTERVAL=1

# Habilitar reconexão automática TCP
TCP_AUTO_RECONNECT=true

# Número máximo de tentativas de reconexão TCP
TCP_MAX_RECONNECT_ATTEMPTS=10

# ----------------------------------------------------------------------------
# CONFIGURAÇÕES DE PERSISTÊNCIA
# ----------------------------------------------------------------------------
# Diretório para armazenamento de dados
DATA_DIR=./data

# Arquivo de banco de dados (SQLite)
DATABASE_FILE=./data/estacionamento.db

# Habilitar backup automático
AUTO_BACKUP=true

# Intervalo de backup (em minutos)
BACKUP_INTERVAL=60

